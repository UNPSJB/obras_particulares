{% extends 'base.html' %}
{% load staticfiles %}
{% load crispy_forms_tags%}

{% block estilos %}
	<link rel="stylesheet" type="text/css" href="{% static perfil %}">
{% endblock %}

{% block imagenusuario %}
	<img src= "{{user.persona.perfilFoto.url}}" width=40 height=40 class="img-circle">
{% endblock %}

{% block barra %}
	<ul class="sidebar sidebar-1">
		<font size="2">
			<li><a href="#" class="current"><font color="tomato">Administrativo</font></a></li>
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne" onclick='mostrarSubmenu("sin_submenu")'>Trámites iniciados</a></li>
			<!--<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" onclick='mostrarSubmenu("sin_submenu")'>Tramites corregidos</a></li>-->
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive" onclick='mostrarSubmenu("sin_submenu")'>Solicitud de final de obra</a></li>
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix" onclick='mostrarSubmenu("sin_submenu")'>Alta profesional</a></li>
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree" onclick='mostrarSubmenu("sin_submenu")'>Alta propietario</a></li>
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven" onclick='mostrarSubmenu("sin_submenu")'>Registrar pagos</a></li>
			<li><a data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour" onclick='mostrarSubmenu("sin_submenu")'>Modificar mis datos personales</a></li>
			<li><a href="#" onclick='mostrarSubmenu("consultasInformes")'>Consultas e Informes <span class="caret"></span></a></li>
				<ul class="sidebar sidebar-2" style="display:none;" id="consultasInformes">
					<li><a href="#">Consulta 1</a></li>
					<li><a href="#">Consulta 2</a></li>
					<li><a href="#">Consulta 3</a></li>
				</ul>
		</font>
	</ul>
{% endblock %}

{% block contenido %}
<button type="button" class="btn btn-sm btn-collapsible-sidebar" onclick='mostrarBarra()' id="botonOn"> <span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span></button>
<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true" >
	<div class="panel" >
		<div class="panel-heading box" role="tab" id="headingOne">
		  	<h5 class="panel-title">
				<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne" onclick='mostrarSubmenu("sin_submenu")'>
					<font color="#ffffff" size="2">Tramites iniciados</font>
				</a>
			</h5>
	  </div>
	  <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
		  <div class="panel-body">
			<div class="container-fluid">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
						{% block contenido_tramite %}
							{% include "persona/administrativo/tramite_list.html" with tramites=ctxtramitesiniciados.tramites %}
						{% endblock %}

					</div>
				</div>
			</div>
		  </div>
	  </div>
	</div>

	<div class="panel">
		<div class="panel-heading box" role="tab" id="headingFive">
		  	<h5 class="panel-title">
				<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
			  		<font color="#ffffff" size="2">Solicitud de final de obra</font>
				</a>
		  	</h5>
		</div>
		<div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
		  <div class="panel-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							{% block contenido_tramite_final_obra %}
								{% include "persona/administrativo/solicitud_final_obra_list.html" with tramites=ctxsolicitudesfinalobra.tramites %}
							{% endblock %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="panel">
		<div class="panel-heading box" role="tab" id="headingSix">
	  		<h5 class="panel-title">
				<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
		  			<font color="#ffffff" size="2">Alta profesional</font>
				</a>
	  		</h5>
		</div>
		<div id="collapseSix" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSix">
			<div class="panel-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							{% block contenido_profesional %}
								{% include "persona/administrativo/profesional_list.html" with personas=ctxprofesional.personas %}
							{% endblock %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="panel">
		<div class="panel-heading box" role="tab" id="headingThree">
		  	<h5 class="panel-title">
				<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
			  		<font color="#ffffff" size="2">Alta propietario</font>
				</a>
		  	</h5>
		</div>
		<div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
			<div class="panel-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							{% block contenido_propietario %}
								{% include "persona/administrativo/propietario_list.html" with propietarios=ctxpropietario.propietarios %}
							{% endblock %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="panel">
		<div class="panel-heading box" role="tab" id="headingSeven">
			<h5 class="panel-title">
			<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
				<font color="#ffffff" size="2">Registrar pago</font>
			</a>
			</h5>
		</div>
		<div id="collapseSeven" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSeven">
			<div class="panel-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
								{% crispy ctxpago %}
							</div>
							<div id="boton_pago" class="col-xs-12 col-sm-12 col-md-12 col-lg-12" align="right">
								<button class="btn btn-danger btn-sm" type="reset" title="Borrar datos del formulario">
									Limpiar
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	  <div class="panel">
	    <div class="panel-heading box" role="tab" id="headingFour">
	      <h5 class="panel-title">
	        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
	          <font color="#ffffff" size="2">Modificar mis datos personales</font>
	        </a>
	      </h5>
	    </div>
	    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
	      <div class="panel-body">
	      	<div class="container-fluid">
	      		<div class="row">
							<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
								<div class="container-fluid">
									<br>
									<form action="" class="" >
										<div class="row">
											<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
												<div class="form-group">
													<label>Nro. de teléfono:</label>
													<input class="form-control input-sm" id="" name="" type="text" placeholder="Ingresar Nro de telefono" title="Ingresar nuevo Nro de telefono"/>
												</div>
											</div>
											<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
												<div class="form-group">
													<label for="">E-Mail:</label>
													<input class="form-control input-sm" id="" name="" type="email" placeholder="Ingresar e-mail" title="Ingresar nuevo e-mail"/>
												</div>
											</div>
											<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
												<label for="">Cambiar Foto de perfil:</label>
												<br>
												<input class="file" id="perfil" type="file" data-preview-file-type="any" title="Cargar nueva foto de perfil">
											</div>
										</div>
										<div class="container-fluid">
											<br>
											<div class="row">
												<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" align="right">
													<button class="btn btn-primary btn-sm" type="submit" title="Enviar modificación de mis datos">
														Modificar mis datos
													</button>
													<button class="btn btn-danger btn-sm" type="reset" title="Borrar datos del formulario">
														Limpiar
													</button>
												</div>
											</div>
										</div>
									</form>
									<br>
								</div>
							</div>
						</div>
	   			</div>
				</div>
			</div>
	  </div>
	</div>

{% endblock %}

{% block scripts %}

	<script>
		$("#perfil").fileinput({
			showCaption: false,
			browseClass: "btn btn-primary btn-sm",
			fileType: "any",
			maxFileCount: 1,
			browseLabel: 'Cargar nueva foto de perfil',
			showUpload: false,
			showRemove: false
		});
	</script>

	<script>
		$(".file").fileinput({
			showCaption: false,
			browseClass: "btn btn-primary btn-sm",
			fileType: ".xlsx",
			maxFileCount: 1,
			browseLabel: 'Cargar archivo pago',
			showUpload: false,
			showRemove: false
		});
	</script>

	<script type="text/javascript">
		function mostrarSubmenu(subformulario)
		{
			if(subformulario=="sin_submenu"){
				$('.' + "sidebar-2").hide();
			}
			else{
				var idSubformulario=document.getElementById(subformulario).id;
				if($('#' + idSubformulario).is(':hidden')){
					$('.' + "sidebar-2").hide();
					$('#' + idSubformulario).show();
				}else{
					$('#' + idSubformulario).hide();
				}
			}
		}
	</script>

	<script>
		$('#submit-id-submit').appendTo('#boton_pago');
	</script>

    <script>
        var c = document.getElementById("botonConfiguracion");
		c.style.display= '';
		var d = document.getElementById("imagenusuario");
		d.style.display= '';
    </script>

{% endblock %}
